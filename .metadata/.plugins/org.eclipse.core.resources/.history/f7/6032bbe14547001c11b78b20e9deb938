package view;

import java.util.ArrayList;

import javax.swing.JButton;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.table.DefaultTableModel;

import controller.Controle;
import model.Produto;

public class TelaProduto extends TelaPadrao{
	
	private JScrollPane barraRolagem, barraRolagemCarrinho;
	private DefaultTableModel modelo, modeloCarrinho;
	private JTable tabela, tabelaCarrinho;
	
	private JTextField buscaField;
	private JButton buscarBtn, addCarrinhoBtn;

	public TelaProduto(Controle controle) {
		super("Produtos", 500, 700);
		
		buscaField = new JTextField(20);
		buscarBtn = new JButton("Buscar");
		addCarrinhoBtn = new JButton("Add ao Carrinho");
		
		modelo = new DefaultTableModel();
		modeloCarrinho = new DefaultTableModel();
		tabela = new JTable(modelo);
		tabelaCarrinho = new JTable(modeloCarrinho);
		modelo.addColumn("Cód. de Barras");
		modelo.addColumn("Nome");
		modelo.addColumn("Preço");
		modelo.addColumn("Dt. Validade");
		modelo.addColumn("Quant.");
		tabela.getColumnModel().getColumn(0).setPreferredWidth(100);
		tabela.getColumnModel().getColumn(1).setPreferredWidth(130);
		tabela.getColumnModel().getColumn(2).setPreferredWidth(100);
		tabela.getColumnModel().getColumn(3).setPreferredWidth(100);
		tabela.getColumnModel().getColumn(4).setPreferredWidth(70);
		
		modeloCarrinho.addColumn("Cód. de Barras");
		modeloCarrinho.addColumn("Nome");
		modeloCarrinho.addColumn("Preço");
		modeloCarrinho.addColumn("Quant.");
		tabelaCarrinho.getColumnModel().getColumn(0).setPreferredWidth(100);
		tabelaCarrinho.getColumnModel().getColumn(1).setPreferredWidth(130);
		tabelaCarrinho.getColumnModel().getColumn(2).setPreferredWidth(100);
		tabelaCarrinho.getColumnModel().getColumn(3).setPreferredWidth(100);
		
		barraRolagem = new JScrollPane(tabela);
		barraRolagemCarrinho = new JScrollPane(tabelaCarrinho);
		
		add(buscaField);
		add(buscarBtn);
		add(barraRolagem);
		add(addCarrinhoBtn);
	}
	
	public void criarTabela(ArrayList<Produto> produtos) {
		modelo.setNumRows(0);
		for (Produto p : produtos) {
			modelo.addRow(new Object[]{p.getCodigoBarras(), p.getNome(), p.getPreco(), Produto.transformadorDataParaString(p.getDataValidade()), p.getQuantidade()});
		}
	}

	public JTextField getBuscaField() {
		return buscaField;
	}

	public JButton getBuscarBtn() {
		return buscarBtn;
	}
	
}
